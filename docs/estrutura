# Arquitetura Completa - App de Investimentos B3

## ğŸ“ Estrutura de DiretÃ³rios

```
investment-app/
â”‚
â”œâ”€â”€ ğŸ“± frontend/                    # ELECTRON + REACT
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â””â”€â”€ assets/
â”‚   â”‚       â”œâ”€â”€ icons/
â”‚   â”‚       â””â”€â”€ images/
â”‚   â”‚
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main/                  # Processo Principal do Electron
â”‚   â”‚   â”‚   â”œâ”€â”€ main.js
â”‚   â”‚   â”‚   â”œâ”€â”€ ipc-handlers.js
â”‚   â”‚   â”‚   â””â”€â”€ window-manager.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ renderer/              # React App
â”‚   â”‚   â”‚   â”œâ”€â”€ App.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ index.jsx
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ components/        # Componentes ReutilizÃ¡veis
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Button.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Input.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Modal.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ LoadingSpinner.jsx
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ charts/        # GrÃ¡ficos
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CandlestickChart.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LineChart.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BarChart.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ TradingViewWidget.jsx
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ tables/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderBook.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TradeHistory.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ PortfolioTable.jsx
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ widgets/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ NewsPanel.jsx
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ TickerTape.jsx
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ AlertsWidget.jsx
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/             # PÃ¡ginas/Telas
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Login.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Register.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ KYC.jsx
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Overview.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Performance.jsx
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ trading/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TradingDesk.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ OrderEntry.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ MarketDepth.jsx
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ portfolio/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Portfolio.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Positions.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Analytics.jsx
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ analysis/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MarketAnalysis.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Screener.jsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Fundamentals.jsx
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ settings/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ Settings.jsx
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ Profile.jsx
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ Security.jsx
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ services/          # ServiÃ§os de ComunicaÃ§Ã£o
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ api.js
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.api.js
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ trading.api.js
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ market.api.js
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ portfolio.api.js
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ websocket/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ websocket.js
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ market-data.ws.js
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ order-updates.ws.js
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ storage/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ localStorage.js
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ indexedDB.js
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ store/             # Redux/Zustand
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ store.js
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ slices/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ authSlice.js
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ marketSlice.js
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ portfolioSlice.js
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ordersSlice.js
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ middleware/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ websocketMiddleware.js
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/             # Custom Hooks
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useWebSocket.js
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useMarketData.js
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ usePortfolio.js
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ useOrderBook.js
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ utils/             # UtilitÃ¡rios
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ formatters.js
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ validators.js
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ calculations.js
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ constants.js
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ styles/            # Estilos
â”‚   â”‚   â”‚       â”œâ”€â”€ global.css
â”‚   â”‚   â”‚       â”œâ”€â”€ variables.css
â”‚   â”‚   â”‚       â””â”€â”€ themes/
â”‚   â”‚   â”‚           â”œâ”€â”€ light.css
â”‚   â”‚   â”‚           â””â”€â”€ dark.css
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ preload/               # Preload Scripts (Electron)
â”‚   â”‚       â””â”€â”€ preload.js
â”‚   â”‚
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ electron-builder.json
â”‚   â””â”€â”€ webpack.config.js
â”‚
â”‚
â”œâ”€â”€ ğŸ–¥ï¸ backend/                     # NODE.JS + EXPRESS
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ config/                # ConfiguraÃ§Ãµes
â”‚   â”‚   â”‚   â”œâ”€â”€ database.js
â”‚   â”‚   â”‚   â”œâ”€â”€ redis.js
â”‚   â”‚   â”‚   â”œâ”€â”€ b3.config.js
â”‚   â”‚   â”‚   â””â”€â”€ environment.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ controllers/           # Controladores (LÃ³gica de NegÃ³cio)
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.controller.js
â”‚   â”‚   â”‚   â”œâ”€â”€ kyc.controller.js
â”‚   â”‚   â”‚   â”œâ”€â”€ trading.controller.js
â”‚   â”‚   â”‚   â”œâ”€â”€ market.controller.js
â”‚   â”‚   â”‚   â”œâ”€â”€ portfolio.controller.js
â”‚   â”‚   â”‚   â”œâ”€â”€ orders.controller.js
â”‚   â”‚   â”‚   â””â”€â”€ reports.controller.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ models/                # Modelos de Dados (Sequelize/Mongoose)
â”‚   â”‚   â”‚   â”œâ”€â”€ User.js
â”‚   â”‚   â”‚   â”œâ”€â”€ Account.js
â”‚   â”‚   â”‚   â”œâ”€â”€ Order.js
â”‚   â”‚   â”‚   â”œâ”€â”€ Position.js
â”‚   â”‚   â”‚   â”œâ”€â”€ Transaction.js
â”‚   â”‚   â”‚   â””â”€â”€ AuditLog.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ routes/                # Rotas da API
â”‚   â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.routes.js
â”‚   â”‚   â”‚   â”œâ”€â”€ trading.routes.js
â”‚   â”‚   â”‚   â”œâ”€â”€ market.routes.js
â”‚   â”‚   â”‚   â”œâ”€â”€ portfolio.routes.js
â”‚   â”‚   â”‚   â””â”€â”€ admin.routes.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/              # ServiÃ§os de NegÃ³cio
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.js
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ jwt.service.js
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ 2fa.service.js
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ trading/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ order.service.js
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ execution.service.js
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ risk.service.js
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ market/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ market-data.service.js
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ fundamentals.service.js
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ news.service.js
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ portfolio/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ portfolio.service.js
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ performance.service.js
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ rebalance.service.js
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ compliance/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ kyc.service.js
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ aml.service.js
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ suitability.service.js
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ integrations/
â”‚   â”‚   â”‚       â”œâ”€â”€ b3.service.js
â”‚   â”‚   â”‚       â”œâ”€â”€ puma.service.js
â”‚   â”‚   â”‚       â”œâ”€â”€ serpro.service.js
â”‚   â”‚   â”‚       â”œâ”€â”€ pix.service.js
â”‚   â”‚   â”‚       â””â”€â”€ tesouro-direto.service.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ middleware/            # Middlewares
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.middleware.js
â”‚   â”‚   â”‚   â”œâ”€â”€ validation.middleware.js
â”‚   â”‚   â”‚   â”œâ”€â”€ rate-limit.middleware.js
â”‚   â”‚   â”‚   â”œâ”€â”€ error.middleware.js
â”‚   â”‚   â”‚   â””â”€â”€ logger.middleware.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ websocket/             # WebSocket Server
â”‚   â”‚   â”‚   â”œâ”€â”€ server.js
â”‚   â”‚   â”‚   â”œâ”€â”€ handlers/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ market-data.handler.js
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ order-updates.handler.js
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ notifications.handler.js
â”‚   â”‚   â”‚   â””â”€â”€ rooms/
â”‚   â”‚   â”‚       â””â”€â”€ room-manager.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ workers/               # Workers/Jobs (Bull Queue)
â”‚   â”‚   â”‚   â”œâ”€â”€ market-data.worker.js
â”‚   â”‚   â”‚   â”œâ”€â”€ order-processor.worker.js
â”‚   â”‚   â”‚   â”œâ”€â”€ report-generator.worker.js
â”‚   â”‚   â”‚   â””â”€â”€ email.worker.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ validators/            # ValidaÃ§Ãµes (Joi/Yup)
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.validator.js
â”‚   â”‚   â”‚   â”œâ”€â”€ order.validator.js
â”‚   â”‚   â”‚   â””â”€â”€ portfolio.validator.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ utils/                 # UtilitÃ¡rios
â”‚   â”‚   â”‚   â”œâ”€â”€ logger.js
â”‚   â”‚   â”‚   â”œâ”€â”€ encryption.js
â”‚   â”‚   â”‚   â”œâ”€â”€ date.js
â”‚   â”‚   â”‚   â””â”€â”€ calculations.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ app.js                 # Express App
â”‚   â”‚   â””â”€â”€ server.js              # Entry Point
â”‚   â”‚
â”‚   â”œâ”€â”€ tests/                     # Testes
â”‚   â”‚   â”œâ”€â”€ unit/
â”‚   â”‚   â”œâ”€â”€ integration/
â”‚   â”‚   â””â”€â”€ e2e/
â”‚   â”‚
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ .env.example
â”‚
â”‚
â”œâ”€â”€ ğŸ“Š analytics-engine/            # PYTHON (Opcional)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ ml_models/
â”‚   â”‚   â”‚   â”œâ”€â”€ price_prediction.py
â”‚   â”‚   â”‚   â”œâ”€â”€ risk_analysis.py
â”‚   â”‚   â”‚   â””â”€â”€ fraud_detection.py
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ indicators/
â”‚   â”‚   â”‚   â”œâ”€â”€ technical.py
â”‚   â”‚   â”‚   â””â”€â”€ fundamentals.py
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ api/
â”‚   â”‚       â””â”€â”€ flask_app.py
â”‚   â”‚
â”‚   â””â”€â”€ requirements.txt
â”‚
â”‚
â”œâ”€â”€ ğŸ—„ï¸ database/
â”‚   â”œâ”€â”€ migrations/                # MigraÃ§Ãµes do Banco
â”‚   â”œâ”€â”€ seeds/                     # Dados Iniciais
â”‚   â””â”€â”€ schemas/
â”‚       â”œâ”€â”€ postgresql.sql
â”‚       â””â”€â”€ timescaledb.sql
â”‚
â”‚
â”œâ”€â”€ ğŸ³ docker/
â”‚   â”œâ”€â”€ Dockerfile.backend
â”‚   â”œâ”€â”€ Dockerfile.frontend
â”‚   â”œâ”€â”€ docker-compose.yml
â”‚   â””â”€â”€ docker-compose.dev.yml
â”‚
â”‚
â”œâ”€â”€ ğŸ“‹ docs/
â”‚   â”œâ”€â”€ API.md
â”‚   â”œâ”€â”€ ARCHITECTURE.md
â”‚   â”œâ”€â”€ SETUP.md
â”‚   â””â”€â”€ DEPLOYMENT.md
â”‚
â”‚
â””â”€â”€ ğŸ”§ scripts/
    â”œâ”€â”€ setup.sh
    â”œâ”€â”€ build.sh
    â””â”€â”€ deploy.sh
```

---

## ğŸ¨ FRONT-END (Electron + React)

### Stack TecnolÃ³gica

```javascript
{
  "framework": "Electron 28+",
  "ui": "React 18+",
  "state": "Redux Toolkit + RTK Query",
  "charts": [
    "TradingView Lightweight Charts",
    "Recharts",
    "D3.js"
  ],
  "realtime": "Socket.IO Client",
  "styling": "Tailwind CSS + shadcn/ui",
  "forms": "React Hook Form + Zod",
  "tables": "TanStack Table"
}
```

### Responsabilidades do Front-end

1. **RenderizaÃ§Ã£o da Interface**
   - Dashboard com mÃºltiplas janelas/painÃ©is
   - GrÃ¡ficos de trading em tempo real
   - Book de ofertas
   - Lista de ordens e posiÃ§Ãµes

2. **ComunicaÃ§Ã£o**
   - REST API para operaÃ§Ãµes CRUD
   - WebSocket para dados em tempo real
   - IPC (Inter-Process Communication) com Electron

3. **GestÃ£o de Estado**
   - Cache de dados de mercado
   - Estado da sessÃ£o do usuÃ¡rio
   - PreferÃªncias e configuraÃ§Ãµes

4. **ValidaÃ§Ãµes Client-Side**
   - FormulÃ¡rios de ordem
   - Inputs de valores
   - Regras de negÃ³cio bÃ¡sicas

---

## âš™ï¸ BACK-END (Node.js + Express)

### Stack TecnolÃ³gica

```javascript
{
  "runtime": "Node.js 20+ LTS",
  "framework": "Express 4+",
  "database": {
    "primary": "PostgreSQL 15+ (TimescaleDB)",
    "cache": "Redis 7+",
    "search": "Elasticsearch 8+"
  },
  "orm": "Sequelize / Prisma",
  "websocket": "Socket.IO",
  "queue": "Bull / BullMQ",
  "validation": "Joi / Zod",
  "authentication": "JWT + Passport.js"
}
```

### Responsabilidades do Back-end

1. **LÃ³gica de NegÃ³cio**
   - ValidaÃ§Ã£o e execuÃ§Ã£o de ordens
   - CÃ¡lculos de risco e exposiÃ§Ã£o
   - GestÃ£o de carteiras
   - Conformidade regulatÃ³ria

2. **IntegraÃ§Ãµes Externas**
   - B3 (PUMA Trading System)
   - Provedores de dados (IQ Feed, Bloomberg)
   - Sistemas de pagamento (PIX)
   - Tesouro Direto
   - Serpro (validaÃ§Ã£o KYC)

3. **Processamento de Dados**
   - AgregaÃ§Ã£o de market data
   - CÃ¡lculo de indicadores tÃ©cnicos
   - GeraÃ§Ã£o de relatÃ³rios
   - Auditoria de transaÃ§Ãµes

4. **SeguranÃ§a**
   - AutenticaÃ§Ã£o e autorizaÃ§Ã£o
   - Criptografia de dados sensÃ­veis
   - Rate limiting
   - Logs de auditoria

5. **WebSocket Server**
   - Broadcasting de cotaÃ§Ãµes
   - NotificaÃ§Ãµes de ordens executadas
   - Alertas de mercado

---

## ğŸ”„ Fluxo de Dados

### 1. Dados de Mercado (Real-time)

```
B3/Provider â†’ Backend WebSocket Server â†’ Frontend WebSocket Client â†’ Redux Store â†’ React Components
```

**ImplementaÃ§Ã£o:**
- **Backend:** Recebe dados da B3 e redistribui via Socket.IO
- **Frontend:** Conecta ao WebSocket e atualiza o estado com dados recebidos

### 2. OperaÃ§Ãµes de Trading

```
Frontend Form â†’ Validation â†’ API POST â†’ Backend Controller â†’ Trading Service â†’ B3 API â†’ Database â†’ WebSocket Broadcast
```

**ImplementaÃ§Ã£o:**
- **Frontend:** FormulÃ¡rio de ordem envia para `/api/orders`
- **Backend:** Valida, executa na B3, salva no DB, notifica via WebSocket

### 3. Consulta de PortfÃ³lio

```
Frontend â†’ API GET â†’ Backend Controller â†’ Portfolio Service â†’ Database â†’ Response â†’ Redux Store
```

**ImplementaÃ§Ã£o:**
- **Frontend:** Usa RTK Query para cache automÃ¡tico
- **Backend:** Retorna dados agregados do portfÃ³lio

---

## ğŸ—‚ï¸ Banco de Dados

### PostgreSQL (+ TimescaleDB)

```sql
-- Principais Tabelas

users
â”œâ”€â”€ id (PK)
â”œâ”€â”€ email
â”œâ”€â”€ password_hash
â”œâ”€â”€ kyc_status
â””â”€â”€ created_at

accounts
â”œâ”€â”€ id (PK)
â”œâ”€â”€ user_id (FK)
â”œâ”€â”€ account_number
â”œâ”€â”€ balance
â””â”€â”€ status

orders
â”œâ”€â”€ id (PK)
â”œâ”€â”€ account_id (FK)
â”œâ”€â”€ symbol
â”œâ”€â”€ side (BUY/SELL)
â”œâ”€â”€ type (MARKET/LIMIT)
â”œâ”€â”€ quantity
â”œâ”€â”€ price
â”œâ”€â”€ status
â””â”€â”€ created_at

positions
â”œâ”€â”€ id (PK)
â”œâ”€â”€ account_id (FK)
â”œâ”€â”€ symbol
â”œâ”€â”€ quantity
â”œâ”€â”€ avg_price
â””â”€â”€ updated_at

market_data (TimescaleDB Hypertable)
â”œâ”€â”€ time (PK)
â”œâ”€â”€ symbol
â”œâ”€â”€ open
â”œâ”€â”€ high
â”œâ”€â”€ low
â”œâ”€â”€ close
â””â”€â”€ volume
```

---

## ğŸ”Œ APIs e IntegraÃ§Ãµes

### 1. B3 (PUMA Trading System)
- **Onde:** `backend/src/services/integrations/b3.service.js`
- **FunÃ§Ã£o:** Envio e recebimento de ordens

### 2. Market Data Providers
- **Onde:** `backend/src/services/market/market-data.service.js`
- **FunÃ§Ã£o:** CotaÃ§Ãµes em tempo real

### 3. PIX (BACEN)
- **Onde:** `backend/src/services/integrations/pix.service.js`
- **FunÃ§Ã£o:** TransferÃªncias instantÃ¢neas

### 4. Serpro (KYC)
- **Onde:** `backend/src/services/compliance/kyc.service.js`
- **FunÃ§Ã£o:** ValidaÃ§Ã£o de documentos

---

## ğŸš€ InicializaÃ§Ã£o e Deploy

### Desenvolvimento

```bash
# Backend
cd backend
npm install
npm run dev

# Frontend
cd frontend
npm install
npm run electron:dev
```

### ProduÃ§Ã£o

```bash
# Build Frontend
cd frontend
npm run electron:build

# Deploy Backend
cd backend
docker-compose up -d
```

---

## ğŸ“¦ Bibliotecas Principais

### Frontend
- `electron` - Desktop app framework
- `react` + `react-dom` - UI library
- `@reduxjs/toolkit` - State management
- `socket.io-client` - WebSocket client
- `lightweight-charts` - TradingView charts
- `recharts` - Charts library
- `tailwindcss` - Styling
- `react-hook-form` - Form handling
- `zod` - Validation

### Backend
- `express` - Web framework
- `socket.io` - WebSocket server
- `sequelize` - ORM
- `ioredis` - Redis client
- `bull` - Job queue
- `joi` - Validation
- `jsonwebtoken` - JWT auth
- `bcrypt` - Password hashing
- `axios` - HTTP client

---

## ğŸ” SeguranÃ§a

### Frontend
- ValidaÃ§Ã£o de inputs
- SanitizaÃ§Ã£o de dados
- NÃ£o armazenar dados sensÃ­veis
- Content Security Policy (CSP)

### Backend
- AutenticaÃ§Ã£o JWT
- Rate limiting
- ValidaÃ§Ã£o de requests
- Criptografia AES-256
- HTTPS/TLS
- SQL injection prevention
- XSS protection

---

## ğŸ“ˆ Performance

### Frontend
- VirtualizaÃ§Ã£o de listas longas
- MemoizaÃ§Ã£o de componentes
- Code splitting
- Lazy loading de rotas
- WebWorkers para cÃ¡lculos pesados

### Backend
- Cache com Redis
- Ãndices de banco otimizados
- Connection pooling
- Load balancing
- CDN para assets estÃ¡ticos

---

## ğŸ“ Notas Importantes

1. **SeparaÃ§Ã£o de Responsabilidades**
   - Frontend: UI/UX e visualizaÃ§Ã£o
   - Backend: LÃ³gica de negÃ³cio e integraÃ§Ãµes

2. **ComunicaÃ§Ã£o**
   - REST para operaÃ§Ãµes CRUD
   - WebSocket para real-time

3. **Escalabilidade**
   - Backend pode ter mÃºltiplas instÃ¢ncias
   - Redis para sincronizaÃ§Ã£o de sessÃµes
   - Message queue para processamento assÃ­ncrono

4. **ManutenÃ§Ã£o**
   - Arquivos separados por domÃ­nio
   - Testes unitÃ¡rios e de integraÃ§Ã£o
   - DocumentaÃ§Ã£o inline
   - CI/CD pipeline